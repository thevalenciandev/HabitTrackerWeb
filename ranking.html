<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Habit tracker - Home</title>
    <script type="text/javascript" src="ranking.js"></script>
    <script type="text/javascript" src="schedules.js"></script>
    <script type="text/javascript" src="html-utils.js"></script>
</head>

<body>
    <a href="index.html">Home</a>
    <a href="admin.html">Administration</a>

    <h1>Habit tracker - ranking ğŸ’ª</h1>
    
    <h2>Table</h2>
    <div id="table-ranking"></div>

    <script type="text/javascript">
        const ranking = Array.from(getExistingRanking().values()).sort((x, y) => y.points - x.points)

        const fillColFn = (row, col, td) => {
            const usrRanking = ranking[row]
            
            if (col == 0) {
                td.innerText = row + 1
            } else if (col == 1) {
                td.innerText = usrRanking.user
            } else if (col == 2) {
                td.innerText = usrRanking.points
            }
        }
        const headers = ["Rank", "Who", "Points"]
        const rankingTable = createTable(ranking.length, headers.length, fillColFn, headers)

        document.getElementById("table-ranking").appendChild(rankingTable)
    </script>

</body>

</html>